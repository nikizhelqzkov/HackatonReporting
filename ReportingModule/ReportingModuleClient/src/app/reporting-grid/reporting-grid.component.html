<div class="card" style="width: 100%; height: auto; padding: 1rem;">
  <p-table #dt [value]="products" [resizableColumns]="true" styleClass="p-datatable-gridlines" stateStorage="local"
    stateKey="user-id-report-storage" [reorderableColumns]="true" [tableStyle]="{'min-width': '50rem'}" [columns]="selectedColumns">
    <ng-template pTemplate="caption">
      <div class="captionTemplate">
        <p-multiSelect display="chip" [options]="columns" [(ngModel)]="selectedColumns" optionLabel="header"
          selectedItemsLabel="{0} columns selected" [style]="{'min-width': '200px'}" placeholder="Choose Columns" />
        <p-button icon="pi pi-bookmark" severity="success" (onClick)="saveColumnWidths()" />
      </div>
    </ng-template>
    <ng-template pTemplate="header" let-column>
      <tr>
        <th *ngFor="let column of selectedColumns" pReorderableColumn  [style.width.px]="columnWidths[column.field] || null"
          id={{column.field}} pResizableColumn>
          {{column.header}}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product let-columns="columns"  let-index="rowIndex">
      <tr>
        <td *ngFor="let col of selectedColumns" class="ui-resizable-column">
          {{product[col.field]}}
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
